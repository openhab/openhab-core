<?xml version="1.0" encoding="UTF-8" standalone="no"?><project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <parent>
    <groupId>org.openhab</groupId>
    <artifactId>pom</artifactId>
    <version>2.5.0-SNAPSHOT</version>
    <relativePath>../pom.xml</relativePath>
  </parent>

  <artifactId>pom-tycho</artifactId>
  <version>2.5.0-SNAPSHOT</version>
  <packaging>pom</packaging>

  <name>openHAB - Tycho settings</name>
  <description>This pom contains the settings for Bundles using the Tycho</description>

  <!-- dependencies, which are not available in a p2-repository -->
  <dependencies>
    <dependency>
      <groupId>org.apache.felix</groupId>
      <artifactId>org.apache.felix.fileinstall</artifactId>
      <version>3.4.0</version>
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupId>org.apache.felix</groupId>
      <artifactId>org.apache.felix.scr.ds-annotations</artifactId>
      <version>${ds-annotations.version}</version>
      <optional>true</optional>
    </dependency>
    <!-- Eclipse Smarthome dependencies - CORE -->
    <dependency>
      <groupId>org.eclipse.smarthome.core</groupId>
      <artifactId>org.eclipse.smarthome.core</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.core</groupId>
      <artifactId>org.eclipse.smarthome.core.persistence</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.core</groupId>
      <artifactId>org.eclipse.smarthome.core.thing</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.core</groupId>
      <artifactId>org.eclipse.smarthome.core.binding.xml</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.core</groupId>
      <artifactId>org.eclipse.smarthome.core.thing.xml</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.core</groupId>
      <artifactId>org.eclipse.smarthome.core.semantics</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.core</groupId>
      <artifactId>org.eclipse.smarthome.core.scheduler</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.core</groupId>
      <artifactId>org.eclipse.smarthome.core.transform</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.core</groupId>
      <artifactId>org.eclipse.smarthome.core.id</artifactId>
      <version>${esh.version}</version>
    </dependency>

    <!-- Eclipse Smarthome Core - Audio / Voice -->
    <dependency>
      <groupId>org.eclipse.smarthome.core</groupId>
      <artifactId>org.eclipse.smarthome.core.audio</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.core</groupId>
      <artifactId>org.eclipse.smarthome.core.voice</artifactId>
      <version>${esh.version}</version>
    </dependency>

    <!-- Eclipse Smarthome dependencies - CONFIG -->
    <dependency>
      <groupId>org.eclipse.smarthome.config</groupId>
      <artifactId>org.eclipse.smarthome.config.core</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.config</groupId>
      <artifactId>org.eclipse.smarthome.config.discovery</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.config</groupId>
      <artifactId>org.eclipse.smarthome.config.discovery.mdns</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.config</groupId>
      <artifactId>org.eclipse.smarthome.config.discovery.upnp</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.config</groupId>
      <artifactId>org.eclipse.smarthome.config.discovery.usbserial</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.config</groupId>
      <artifactId>org.eclipse.smarthome.config.discovery.usbserial.linuxsysfs</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.config</groupId>
      <artifactId>org.eclipse.smarthome.config.serial</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.config</groupId>
      <artifactId>org.eclipse.smarthome.config.xml</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.config</groupId>
      <artifactId>org.eclipse.smarthome.config.dispatch</artifactId>
      <version>${esh.version}</version>
    </dependency>

    <!-- Eclipse Smarthome dependencies - IO -->
    <dependency>
      <groupId>org.eclipse.smarthome.io</groupId>
      <artifactId>org.eclipse.smarthome.io.console</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.io</groupId>
      <artifactId>org.eclipse.smarthome.io.console.rfc147</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.io</groupId>
      <artifactId>org.eclipse.smarthome.io.rest</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.io</groupId>
      <artifactId>org.eclipse.smarthome.io.rest.core</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.io</groupId>
      <artifactId>org.eclipse.smarthome.io.rest.sse</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.io</groupId>
      <artifactId>org.eclipse.smarthome.io.monitor</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.io</groupId>
      <artifactId>org.eclipse.smarthome.io.net</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.io</groupId>
      <artifactId>org.eclipse.smarthome.io.http</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.io</groupId>
      <artifactId>org.eclipse.smarthome.io.http.auth</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.io</groupId>
      <artifactId>org.eclipse.smarthome.io.http.auth.basic</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.io</groupId>
      <artifactId>org.eclipse.smarthome.io.transport.upnp</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.io</groupId>
      <artifactId>org.eclipse.smarthome.io.transport.mdns</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.io</groupId>
      <artifactId>org.eclipse.smarthome.io.transport.mqtt</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.io</groupId>
      <artifactId>org.eclipse.smarthome.io.transport.serial</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.io</groupId>
      <artifactId>org.eclipse.smarthome.io.transport.serial.rxtx</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.io</groupId>
      <artifactId>org.eclipse.smarthome.io.transport.serial.rxtx.rfc2217</artifactId>
      <version>${esh.version}</version>
    </dependency>

    <!-- Eclipse Smarthome dependencies - Automation -->
    <dependency>
      <groupId>org.eclipse.smarthome.automation</groupId>
      <artifactId>org.eclipse.smarthome.automation.core</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.automation</groupId>
      <artifactId>org.eclipse.smarthome.automation.api</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.automation</groupId>
      <artifactId>org.eclipse.smarthome.automation.commands</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.automation</groupId>
      <artifactId>org.eclipse.smarthome.automation.providers</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.automation</groupId>
      <artifactId>org.eclipse.smarthome.automation.parser.gson</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.automation</groupId>
      <artifactId>org.eclipse.smarthome.automation.rest</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.automation</groupId>
      <artifactId>org.eclipse.smarthome.automation.module.core</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.automation</groupId>
      <artifactId>org.eclipse.smarthome.automation.module.script</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.automation</groupId>
      <artifactId>org.eclipse.smarthome.automation.module.script.defaultscope</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.automation</groupId>
      <artifactId>org.eclipse.smarthome.automation.module.timer</artifactId>
      <version>${esh.version}</version>
    </dependency>

    <!-- Eclipse Smarthome dependencies - Actions -->
    <dependency>
      <groupId>org.eclipse.smarthome.model</groupId>
      <artifactId>org.eclipse.smarthome.model.core</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.model</groupId>
      <artifactId>org.eclipse.smarthome.model.item</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.model</groupId>
      <artifactId>org.eclipse.smarthome.model.script</artifactId>
      <version>${esh.version}</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.smarthome.model</groupId>
      <artifactId>org.eclipse.smarthome.model.persistence</artifactId>
      <version>${esh.version}</version>
    </dependency>

    <!-- Eclipse Smarthome dependencies - Storage -->
    <dependency>
      <groupId>org.eclipse.smarthome.storage</groupId>
      <artifactId>org.eclipse.smarthome.storage.json</artifactId>
      <version>${esh.version}</version>
    </dependency>

    <!-- Eclipse Smarthome dependencies - UI -->
    <dependency>
      <groupId>org.eclipse.smarthome.ui</groupId>
      <artifactId>org.eclipse.smarthome.ui</artifactId>
      <version>${esh.version}</version>
    </dependency>

    <dependency>
      <groupId>org.eclipse.smarthome.ui</groupId>
      <artifactId>org.eclipse.smarthome.ui.icon</artifactId>
      <version>${esh.version}</version>
    </dependency>

    <!-- Eclipse Smarthome dependencies - Test -->
    <dependency>
      <groupId>org.eclipse.smarthome.test</groupId>
      <artifactId>org.eclipse.smarthome.test</artifactId>
      <version>${esh.version}</version>
    </dependency>
  </dependencies>

  <repositories>
    <!-- openHAB dependencies p2 repository -->
    <repository>
      <id>p2-openhab-deps-repo</id>
      <url>https://dl.bintray.com/openhab/p2/openhab-deps-repo/${ohdr.version}</url>
      <layout>p2</layout>
    </repository>

    <!-- Eclipse p2 repository -->
    <repository>
      <id>eclipse-oxygen</id>
      <url>http://download.eclipse.org/releases/oxygen/201709271000</url>
      <layout>p2</layout>
    </repository>
  </repositories>

  <build>
    <pluginManagement>
      <plugins>
        <plugin>
          <groupId>${tycho-groupid}</groupId>
          <artifactId>tycho-compiler-plugin</artifactId>
          <version>${tycho-version}</version>
          <configuration>
            <encoding>UTF-8</encoding>
            <source>${maven.compiler.source}</source>
            <target>${maven.compiler.target}</target>
            <compilerId>jdt</compilerId>
            <useProjectSettings>false</useProjectSettings>
            <extraClasspathElements>
              <extraClasspathElement>
                <groupId>org.eclipse.jdt</groupId>
                <artifactId>org.eclipse.jdt.annotation</artifactId>
                <version>${jdt-annotations.version}</version>
              </extraClasspathElement>
              <extraClasspathElement>
                <groupId>org.apache.felix</groupId>
                <artifactId>org.apache.felix.scr.ds-annotations</artifactId>
                <version>${ds-annotations.version}</version>
              </extraClasspathElement>
            </extraClasspathElements>
            <compilerArgs>
              <!--
                            <arg>-err:+nullAnnot(org.eclipse.jdt.annotation.Nullable|org.eclipse.jdt.annotation.NonNull|org.eclipse.jdt.annotation.NonNullByDefault),+inheritNullAnnot</arg>
                            -->
              <arg>-warn:+nullAnnot(org.eclipse.jdt.annotation.Nullable|org.eclipse.jdt.annotation.NonNull|org.eclipse.jdt.annotation.NonNullByDefault),+null,+inheritNullAnnot,+nullAnnotConflict,-nullUncheckedConversion,+nullAnnotRedundant,+nullDereference</arg>
            </compilerArgs>
          </configuration>
        </plugin>
        <plugin>
          <groupId>${tycho-groupid}</groupId>
          <artifactId>target-platform-configuration</artifactId>
          <version>${tycho-version}</version>
          <configuration>
            <pomDependencies>consider</pomDependencies>
            <environments>
              <environment>
                <os>linux</os>
                <ws>gtk</ws>
                <arch>x86</arch>
              </environment>
              <environment>
                <os>linux</os>
                <ws>gtk</ws>
                <arch>x86_64</arch>
              </environment>
              <environment>
                <os>win32</os>
                <ws>win32</ws>
                <arch>x86</arch>
              </environment>
              <environment>
                <os>macosx</os>
                <ws>cocoa</ws>
                <arch>x86_64</arch>
              </environment>
            </environments>
          </configuration>
        </plugin>
        <plugin>
          <groupId>${tycho-groupid}</groupId>
          <artifactId>tycho-surefire-plugin</artifactId>
          <version>${tycho-version}</version>
          <configuration>
            <failIfNoTests>false</failIfNoTests>
          </configuration>
        </plugin>
        <plugin>
          <artifactId>maven-compiler-plugin</artifactId>
          <version>3.6.1</version>
          <configuration>
            <compilerId>groovy-eclipse-compiler</compilerId>
          </configuration>
          <dependencies>
            <dependency>
              <groupId>org.codehaus.groovy</groupId>
              <artifactId>groovy-eclipse-compiler</artifactId>
              <version>2.9.2-01</version>
            </dependency>
            <dependency>
              <groupId>org.codehaus.groovy</groupId>
              <artifactId>groovy-eclipse-batch</artifactId>
              <version>2.4.3-01</version>
            </dependency>
          </dependencies>
          <executions>
            <execution>
              <goals>
                <goal>compile</goal>
              </goals>
            </execution>
          </executions>
        </plugin>
      </plugins>
    </pluginManagement>
    <plugins>
      <plugin>
        <groupId>${tycho-groupid}</groupId>
        <artifactId>tycho-maven-plugin</artifactId>
        <version>${tycho-version}</version>
        <extensions>true</extensions>
      </plugin>
      <plugin>
        <groupId>${tycho-groupid}</groupId>
        <artifactId>tycho-packaging-plugin</artifactId>
        <version>${tycho-version}</version>
        <configuration>
          <strictVersions>false</strictVersions>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.codehaus.groovy</groupId>
        <artifactId>groovy-eclipse-compiler</artifactId>
        <version>${groovy.eclipse.compiler.version}</version>
        <extensions>true</extensions>
      </plugin>
      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
      </plugin>
      <plugin>
        <groupId>org.apache.felix</groupId>
        <artifactId>maven-scr-plugin</artifactId>
        <dependencies>
          <dependency>
            <groupId>org.osgi</groupId>
            <artifactId>org.osgi.service.component.annotations</artifactId>
            <version>1.3.0</version>
          </dependency>
        </dependencies>
        <executions>
          <execution>
            <id>generate-scr-scrdescriptor</id>
            <goals>
              <goal>scr</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-resources-plugin</artifactId>
        <version>3.1.0</version>
        <executions>
          <execution>
            <goals>
              <goal>copy-resources</goal>
            </goals>
            <phase>process-test-resources</phase>
            <configuration>
              <outputDirectory>${project.basedir}/OSGI-INF</outputDirectory>
              <overwrite>true</overwrite>
              <resources>
                <resource>
                  <directory>${project.basedir}/target/classes/OSGI-INF</directory>
                </resource>
              </resources>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>

  <profiles>
    <profile>
      <id>deploy</id>
      <build>
        <plugins>
          <plugin>
            <groupId>${tycho-groupid}</groupId>
            <artifactId>tycho-source-plugin</artifactId>
            <version>${tycho-version}</version>
            <configuration>
              <sourceBundle>true</sourceBundle>
            </configuration>
            <executions>
              <execution>
                <id>plugin-source</id>
                <goals>
                  <goal>plugin-source</goal>
                </goals>
                <phase>package</phase>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>

    <profile>
      <id>prepare-next-snapshot</id>
      <build>
        <plugins>
          <plugin>
            <groupId>org.eclipse.tycho</groupId>
            <artifactId>tycho-versions-plugin</artifactId>
            <version>${tycho-version}</version>
            <executions>
              <execution>
                <id>update-version</id>
                <goals>
                  <goal>set-version</goal>
                </goals>
                <phase>initialize</phase>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>
  </profiles>

</project>
